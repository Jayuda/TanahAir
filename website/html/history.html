<template name="history">
  <div class="history">
    <h1>{{pageTitle}}</h1>
    <table class="table table-striped">
      <thead>
        <th>Date</th>
        <th>Created by</th>
        <th>Published by</th>
        <th>Comment</th>
      </thead>
      <tbody>
        {{#each edits}}
          <tr>
            <td><a data-type="history" data-ts="{{ts}}" class="internal-link"
                  href="/history/{{pageId}}/{{ts}}">{{date}}</a></td>
            <td>{{#with createdBy}}{{> profileLink}}{{/with}}</td>
            <td>{{#with publishedBy}}{{> profileLink}}{{/with}}</td>
            <td>{{comment}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{> historicalEdit}}
</template>

<template name="historicalEdit">
  {{#if showHistoricalEdit}}
    {{> modal-blackout}}
    <div class="modal-container">
      <div class="historical-edit span10">
        <a href="#"
          class="icon-large icon-remove-sign internal-action historical-close"
          data-type="action"
          data-action="close"></a>
        {{#with data}}
        <div class="historical-edit-header row">
          <div class="span2">
          {{#if hasPrev}}
          {{/if}}
          </div>
          <div class="span6 historical-edit-who">
            By
            {{#with author}}
              {{> profileLink}}
            {{/with}}
            on
            {{date}}
          </div>
          <div class="span2">
          {{#if hasNext}}
          {{/if}}
          </div>
        </div>
        <div class="historical-edit-comment row">
          {{comment}}
        </div>
        <div class="historical-edit-content row">
          {{{formattedContent}}}
        </div>
        {{/with}}
      </div>
    </div>
  {{/if}}
</template>
